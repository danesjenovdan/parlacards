{"_id":"5806f939b0702658a04f22a9","sourceType":"custom","name":"Seznam poslancev","group":"p","ejs":"<style></style><script>var seznamPoslancevData = <%- JSON.stringify(data); %>; var seznamPoslancevStatus = <%- JSON.stringify(status); %>;</script> <% var columns = { presence_sessions: { label: 'Prisotnost na sejah DZ', unit: 'percent' }, presence_votes: { label: 'Prisotnost na glasovanjih sej DZ', unit: 'percent' }, vocabulary_size: { label: 'Besedni zaklad' }, spoken_words: { label: 'Št. izgovorjenih besed' }, speeches_per_session: { label: 'Št. govorov na sejo' }, privzdignjeno: { label: 'Privzdignjeno besedje' }, preprosto: { label: 'Preprosto besedje' }, problematicno: { label: 'Problematično besedje' }, }; %> <div class=\"card-container card-halfling card-seznam-poslancev\"><div class=\"card-header\"><div class=\"card-header-border\"></div><h1>Seznam poslancev</h1></div><div class=\"card-content\"><ul class=\"person-list\"><li class=\"headers\"><div data-sort=\"name\" class=\"column wider sort\">Ime</div><div data-sort=\"party\" class=\"column\">PS</div><div data-sort=\"district\" class=\"column\">Okraj</div> <% if (status && status.analysis) { %> <div data-sort=\"analysis\" class=\"column\"><%= columns[status.analysis].label %></div> <% } %> </li> <% data.data.forEach(function(result, index) { %> <li class=\"person\" data-index=\"<%= index %>\"><a href=\"/p/id/<%= result.person.id %>\"><img class=\"portrait column\" src=\"https://cdn.parlameter.si/v1/parlassets/img/people/square/<%= result.person.gov_id %>.png\"></a><div class=\"column wider name\"><%= result.person.name %></div><div class=\"column\"><a href=\"/ps/id/<%= result.person.party.id %>\"> <%= result.person.party.acronym %> </a></div><div class=\"column\"><%= result.person.district || 'okraj ni vnešen' %></div> <% if (status && status.analysis) { %> <div class=\"column\"> <%= result.results[status.analysis] + (columns[status.analysis].unit === 'percent' ? '%' : '') %> </div> <% } %> </li> <% }) %> </ul></div><div class=\"card-footer\"><div class=\"card-circle-button card-share\"></div><div class=\"card-circle-button card-embed\"></div><div class=\"card-circle-button card-info\">i</div></div></div><script>!function(){function e(e,r,t){r===t?e.toggleClass(\"reverse\"):(n.find(\".sort, .reverse\").removeClass(\"sort reverse\"),e.addClass(\"sort\"))}function r(e,r){personElements.sort(function(r,t){var n=e(seznamPoslancevData.data[r.getAttribute(\"data-index\")]),s=e(seznamPoslancevData.data[t.getAttribute(\"data-index\")]);return n>s?1:n<s?-1:0}),personElements.detach(),r&&(personElements=$(personElements.get().reverse())),personElements.appendTo(t)}var t=$(\".card-seznam-poslancev .person-list\"),n=t.find(\".headers\");personElements=t.children(\".person\"),currentSortProperty=\"name\",currentReverseOrder=!1,sortPropGetters={name:function(e){return e.person.name},party:function(e){return e.person.party.acronym},district:function(e){return e.person.district},analysis:function(e){return e.results[seznamPoslancevStatus.analysis]}},n.on(\"click\",\".column\",function(t){var n=$(t.currentTarget),s=n.data(\"sort\"),o=currentSortProperty===s&&!currentReverseOrder;r(sortPropGetters[s],o),e(n,s,currentSortProperty),currentSortProperty=s,currentReverseOrder=o})}();</script>","method":"seznam-poslancev","dataUrl":"https://analize.parlameter.si/v1/p/getListOfMembers","uniquePath":"p/https://glej.parlameter.si/p/seznam-poslancev","__v":0,"lastUpdate":"2016-11-04T15:36:19.815Z","dateTimeCreated":"2016-10-19T04:40:25.544Z"}