<!DOCTYPE html> <!-- removeme -->
<html> <!-- removeme -->

<head> <!-- removeme -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> <!-- removeme -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <!-- removeme -->

    <!-- build:remove -->
    <!-- these script files are removed on build -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdn.parlameter.si/v1/parlassets/js/perfect-scrollbar.js"></script>
    <script src="https://cdn.parlameter.si/v1/parlassets/js/perfect-scrollbar.jquery.js"></script>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://cdn.parlameter.si/v1/parlassets/js/script.js"></script>
    <!-- endbuild -->

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" data-remove="false" data-concat="false"> <!-- removeme -->
    <link rel="stylesheet" href="https://cdn.parlameter.si/v1/parlassets/css/perfect-scrollbar.css" data-remove="false" data-concat="false"> <!-- removeme -->
    <link rel="stylesheet" href="https://cdn.parlameter.si/v1/parlassets/scss/style.css" data-remove="false" data-concat="false"> <!-- removeme -->
    <link rel="stylesheet" href="style.css" data-remove="false" data-concat="false"> <!-- removeme -->

    <!-- your css file is compiled to this and later inlined (must begin with data-inline="true" )-->
    <link data-inline="true" rel="stylesheet" href="css/style.css">

    <script>
      var seznamPoslancevData = <%- JSON.stringify(data); %>;
      var seznamPoslancevState = <%- JSON.stringify(state); %>;
    </script>
</head> <!-- removeme -->

<body> <!-- removeme -->
    <% function round(value, precision) {
      var multiplier = Math.pow(10, precision || 0);
      return Math.round(value * multiplier) / multiplier;
    };

    function generateUrl() {
      return 'https://glej.parlameter.si/' + cardData.group + '/' + cardData.method + '/' +
        '?customUrl=' + encodeURIComponent('https://analize.parlameter.si/v1/pg/getListOfPGs') +
        (Object.keys(state).length > 0 ? '&state=' + encodeURIComponent(JSON.stringify(state)) : '');
    };

    var analyses = {
      seat_count: {
        label: 'po številu sedežev'
      },
      presence_sessions: {
        label: 's prisotnostjo na sejah DZ',
        unit: 'percent'
      },
      presence_votes: {
        label: 's prisotnostjo na glasovanjih sej DZ',
        unit: 'percent'
      },
      vocabulary_size: {
        label: 'z raznolikostjo besedišča'
      },
      privzdignjeno: {
        label: 's privzdignjenim besedjem'
      },
      preprosto: {
        label: 's preprostim besedjem'
      },
      problematicno: {
        label: 'z ekscesnim besedjem'
      }
    };
    var analysis = state && state.analysis ? state.analysis : 'seat_count';
    var maxValue = data.data.reduce(function(oldValue, nextParty) {
      return Math.max(oldValue, nextParty.results[analysis])
    }, 0);

    data.data = data.data.sort(function(a, b) {
      return a.results['seat_count'] > b.results['seat_count'] ? -1 : (a.results['seat_count'] < b.results['seat_count'] ? 1 : 0);
    }); %>

    <!-- everything above here is part of the page and not part of the card -->
    <div class="card-container card-halfling <%= className %>">
        <div class="card-header">
            <div class="card-header-border"></div>
            <h1>Seznam poslanskih skupin <%= analyses[analysis].label %></h1> <!-- this text is the only thing you touch in .card-header -->
        </div>
        <div class="card-content">
          <div class="card-content-front">
            <ul class="party-list">
              <% data.data.forEach(function(result, index) { %>
              <li class="party">
                <div class="column name">
                  <a class="funblue-light-hover" href="/ps/id/<%= result.party.id %>"><%= result.party.acronym %></a>
                </div>
                <div class="column chart">
                <% var rawValue = result.results[analysis];
                   var displayValue = round(rawValue, 1) + (analyses[analysis].unit === 'percent' ? '%' : '');
                   var chartWidth = rawValue ? rawValue / maxValue * 80 + '%' : '1px'; %>
                    <div class="progress hugebar">
                        <div class="progress-bar funblue" role="progressbar" style="width: <%= chartWidth %>"></div>
                        <div class="progress_number"><%= displayValue %></div>
                    </div>
                </div>
              </li>
              <% }) %>
            </ul>
          </div>
          <div class="card-content-info hidden">
            <div class="card-back-content">
              <div class="scroller" id="tvojamtka">
                <p class="info-text"></p>
              </div>
            </div>
          </div>
          <div class="card-content-embed hidden">
            <div class="card-back-content">
              <div class="embed-content">
                <div class="embed-divider"></div>
                <div class="embed-switch-container">
                  <div class="embed-label">Podatki naj se vedno osvežujejo</div>
                  <div class="embed-switch-big-box">
                    <div class="embed-switch-box">
                      <div class="embed-switch">
                        <div class="embed-switches">
                          <div class="leftswitch">DA</div>
                          <div class="rightswitch">NE</div>
                        </div>
                      </div>
                    </div>
                    <div class="embed-switch-ball"></div>
                  </div>
                </div>
                <div class="embed-divider"></div>
                <div class="embed-script">
                  <textarea class="form-control" data-id="0" data-url="https://glej.parlameter.si/ps/seznam-poslanskih-skupin/"><script>(function(d,script){script=d.createElement('script');script.type='text/javascript';script.async=true;script.onload=function(){iFrameResize({log:true,checkOrigin:false})};script.src = 'https://cdn.parlameter.si/v1/parlassets/js/iframeResizer.min.js';d.getElementsByTagName('head')[0].appendChild(script);}(document));</script><iframe frameborder="0" width="100%" src="<%= generateUrl() %>&embed=true"></textarea>
                  <button class="btn-parlameter btn-full-width btn-blue btn-copy-embed">KOPIRAJ</button>
                </div>

              </div>
            </div>
          </div>
          <div class="card-content-share hidden">
              <div class="card-back-content card-content">
                  <div class="share-content">
                      <label for="share-url">Neposredna povezava do kartice</label>
                      <input type="url" class="form-control share-url" id="share-url" value="<%= generateUrl() %>&frame=true"/>
                      <button class="btn-parlameter btn-full-width btn-blue">KOPIRAJ</button>
                  </div>
              </div>
          </div>
        </div>
        <div class="card-footer">
          <div class="card-logo hidden">
            <a href="https://skoraj.parlameter.si/">
              <img src="https://cdn.parlameter.si/v1/parlassets/img/logo-parlameter.svg" alt="parlameter logo">
            </a>
          </div>

          <div class="card-circle-button card-share" data-back="share"></div>
          <div class="card-circle-button card-embed" data-back="embed"></div>
          <div class="card-circle-button card-info" data-back="info">i</div>
        </div>
    </div>
    <!-- everything below here is part of the page and not part of the card -->

    <!-- your js file is compiled to this and later inlined (must begin with data-inline="true" )-->
    <!-- inline temp/js/script.js as <script> -->
    <script data-inline="true" src="js/script.js"></script>

</body> <!-- removeme -->

</html> <!-- removeme -->
